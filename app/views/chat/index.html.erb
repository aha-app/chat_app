<div class="chat-container" data-controller="chat">
  <div data-chat-target="chatMessages">
    <% @messages.each do |message| %>
      <% if message["role"] == "user" %>
        <div class="user-message">
          <%= message["content"] %>
        </div>
      <% else %>
        <div class="assistant-message">
          <%= message["content"] %>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="streaming-message" style="display: none;" data-chat-target="streamingMessage"></div>
  <%= form_with(url: "/chat", data: { action: 'chat#handleSubmit', chat_target: 'chatForm' }) do |form| %>
    <input type="text" data-chat-target="chatInput">
    <%= form.submit "Send", data: { chat_target: "submitButton" }  %>
  <% end %>
</div>
